"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5910],{3470:(e,t,s)=>{s.d(t,{D:()=>N});var a=s(41506),n=s.n(a),o=s(67996),l=s.n(o),r=(s(47010),s(31085)),i=s(79384),c=s(53373),u=s.n(c),d=s(14041),m=s(46494),p=s(93441),f=s(12163),y=s(86600),h=s(99253);const b=["className"],N=(0,d.forwardRef)(((e,t)=>{let{className:s}=e,a=l()(e,b);const[o,c]=(0,p.cG)("Play","Play_With_Game_Pass_Ultimate"),N=(0,f.G)(),g=(0,d.useCallback)((()=>{N(y.Hg.path,{})}),[N]);return(0,r.jsxs)(i.JK,n()(n()({ref:t,as:"button","data-action-type":m.y.OverlayIn,className:u()("GamePassUpsellButton-module__upsellButton___qvDh1",s),buttonType:i.VQ.Brand,onClick:g},a),{},{children:[(0,r.jsx)("div",{className:h.Wg,children:o}),(0,r.jsx)("div",{className:h.b1,children:c})]}))}))},5910:(e,t,s)=>{s.d(t,{m:()=>he,w:()=>ye});var a=s(67996),n=s.n(a),o=s(41506),l=s.n(o),r=(s(10865),s(47010),s(31085)),i=s(39731),c=s(57361),u=s(66957),d=s(47283),m=s(14041),p=s(79824),f=s(23536),y=s(82427),h=s(64232),b=s(10667),N=s(87309),g=s(12163),_=s(86600),x=s(52003),P=s(75618),v=s(31186),w=s(30961),k=s(39407),B=s(15387),T=s(77963),A=s(52735),j=s(30403),R=s(26992),C=s(58712),S=s(96611),I=s(93441),G=s(34041),U=s(56136),E=s(19202),L=s(94787),D=s(78672),F=s(72841),O=s(89817),q=s(2744),V=s(6597),K=s(3470),Q=s(79384),W=s(53373),J=s.n(W);const H={"9NJCVGS6T30K":"9NGT91FHPSRD","9PH9X0760B0T":"9NF28NB0LX8F"};var M=s(99253);const X=["productId","className","buttonType"],$=(0,m.forwardRef)(((e,t)=>{let{productId:s,className:a,buttonType:o=Q.VQ.Brand}=e,i=n()(e,X);const[c,u]=(0,I.cG)("Get_Early_Access","ProductDetailPage_BuyNowLine2"),d=(0,L.o3)("BuyNowButton"),p=(0,g.G)(),f=function(e){return H[e]||e}(s),y=(0,m.useCallback)((()=>{d.trackUserAction(D.a.BuyButton,void 0,{productId:s,earlyAccessProductId:f}),p(_.zO.path,{productId:f})}),[f,p,s,d]);return(0,r.jsxs)(Q.JK,l()(l()({as:"button",onClick:y,buttonType:o,ref:t,className:J()(M.ti,a)},i),{},{children:[(0,r.jsx)("div",{className:M.Wg,children:c}),(0,r.jsx)("div",{className:M.b1,children:u})]}))}));var Y=s(76077),z=s(76696);const Z=["className"],ee=(0,m.forwardRef)(((e,t)=>{let{className:s}=e,a=n()(e,Z);const o=(0,I.FE)("Not_Available_Separately");return(0,r.jsx)("div",{ref:t,tabIndex:0,className:M.iE,children:(0,r.jsx)(Q.JK,l()(l()({isCallToAction:!0,disabled:!0,as:"button",className:J()(s,M.ti),buttonType:Q.VQ.Secondary},a),{},{children:o}))})}));var te=s(84989),se=s(58810),ae=s(44552);const ne=["className"],oe=(0,m.forwardRef)(((e,t)=>{let{className:s}=e,a=n()(e,ne);const{isTV:o}=(0,w.U)(),i=(0,I.FE)("UnsupportedMarket_ViewRegions");return(0,r.jsx)(Q.mS,l()(l()({as:"a",ref:t,icon:o?te.A:se.A,isCallToAction:!0,className:J()(M.ti,"PlayWithContextualFallbackButton-module__regionUnsupportedButton___l70IS",s),buttonType:Q.VQ.Brand,href:ae.JZ,target:"_blank"},a),{},{children:i}))}));var le=s(94670),re=s(46494);const ie=["askExceptionRequest","className"],ce={ServiceError:null,UserIsUnderage:"Content",[le.ResponseBlockReasons.AppLimits]:"ScreenTime",[le.ResponseBlockReasons.ScreenTime]:"ScreenTime",[le.ResponseBlockReasons.AppOverride]:"Content",[le.ResponseBlockReasons.AppBlocking]:"Content",[le.ResponseBlockReasons.None]:"Content"},ue=(0,m.forwardRef)(((e,t)=>{let{askExceptionRequest:s,className:a}=e,o=n()(e,ie);const i=(0,g.G)(),c=(0,m.useCallback)((()=>{i(_.wr.path,{askExceptionRequest:s})}),[i,s]),u=(0,I.FE)("ExceptionRequest_RequestPermission_Button");return(0,r.jsx)(Q.JK,l()(l()({ref:t,as:"button",isCallToAction:!0,className:J()(M.ti,a),"data-action-type":re.y.OverlayIn,buttonType:Q.VQ.Brand,onClick:c},o),{},{children:u}))}));var de=s(5513);const me=["className"],pe=(0,m.forwardRef)(((e,t)=>{let{className:s}=e,a=n()(e,me);const o=(0,I.FE)("Browser_Unsupported");return(0,r.jsx)("div",{ref:t,tabIndex:0,className:M.iE,children:(0,r.jsx)(Q.JK,l()(l()({as:"button",disabled:!0,isCallToAction:!0,className:J()(M.ti,s),buttonType:Q.VQ.Secondary},a),{},{children:o}))})})),fe=["launchStreamOptions","getLaunchStreamOptions","productId","title","context","className"],ye=(0,m.memo)((e=>(0,r.jsx)(i.PersistentFocus,{children:(0,r.jsx)(he,l()({"data-auto-focus":!0},e))}))),he=e=>{let{launchStreamOptions:t,getLaunchStreamOptions:s,productId:a,title:o,context:Q="default",className:W}=e,J=n()(e,fe);const{setRef:H}=(0,i.usePersistentFocusRef)(),M=(0,B.G_)(N.H.EnableBYOGPurchase),X=(0,B.G_)(N.H.EnableFreeToPlay),Z=(0,B.G_)(N.H.EnableAskAParentScreenTime),te=(0,B.G_)(N.H.EnableAskAParentContent),[se,{loading:ae}]=(0,C.a)(a,U._.Detailed),ne=(0,u.useUniqueLogger)("PlayWithContextualFallbackButton"),le=(0,y.T)(),re=(0,p.useSelector)(d.Kj),{showGetReadyToPlayButton:ie}=(0,q.FJ)(),me=(0,v.d)(a),ye=(0,A.w)(),he=(0,p.useSelector)(G.K$),be=!(null===he||void 0===he||!he.isRunning),[Ne]=(0,h.P)(),{isTV:ge,isFireOS:_e}=(0,w.U)(),xe=(0,T.C)(),[Pe,ve]=(0,m.useState)(!1),[we,{loading:ke}]=(0,b.x)(),[Be,{loading:Te}]=(0,S.Q)(a),[Ae,{loading:je}]=(0,k.k)(a),[Re,{loading:Ce}]=(0,F.zY)(),Se=(0,c.isFetching)((0,R.$)(a)),Ie="PlayWithContextualFallbackButton",Ge=(0,j.w)({telemetryLocation:Ie,productId:a}),Ue=(0,L.o3)(Ie),Ee=(0,g.G)(),[Le,,{setUserSetting:De}]=(0,P.c)("showConfirmQuitF2PModal"),Fe=(0,m.useCallback)((async()=>{if(!t){if(s){ve(!0);const e=await s();return ve(!1),e}return{}}return t}),[t,s]),Oe=(0,m.useCallback)((async()=>{const e=await Fe();Ee(_.C$.path,{productId:a,title:o,launchStreamOptions:e},{replace:!0})}),[Fe,Ee,a,o]),[qe]=(0,P.c)("showGameModeEducator"),Ve=_e&&qe,{showWifiWarning:Ke}=(0,O.x)(),Qe=(0,m.useCallback)((async()=>{const e=await Fe();return Ue.trackUserAction(D.a.AttemptToPlay,void 0),me!==v.G.Partial&&!Ve&&!Ke||be?(Le&&De(!1),Ge(l()({shouldNavigate:!0},e))):Oe()}),[Fe,Ue,me,Ve,Ke,be,Oe,Le,Ge,De]),We=X&&(0,x.bD)(a),Je=(0,I.FE)("SignInToPlay_Button");if(ie)return(0,r.jsx)(Y.l,l()({ref:H},J));if(!le)return(0,r.jsx)(de.h,l()({ref:H,className:W,customSignInText:"invite"===Q?Je:void 0},J));if(!ye)return(0,r.jsx)(oe,l()({ref:H,className:W},J));if(me===v.G.Blocked)return(0,r.jsx)(pe,l()({ref:H,className:W},J));if(Pe||Te||je||Ce||ae||Se||void 0===we&&ke||!Ne)return(0,r.jsx)(z.l,l()({ref:H,className:W},J));if(!We&&!1===we)return ne.debug("Title is not F2P and user is not an XGPU subscriber. Showing GamePass Upsell button."),(0,r.jsx)(K.D,l()({ref:H,className:W},J));if(!1===(null===Ae||void 0===Ae?void 0:Ae.isAllowed)&&re&&Be){const e=ce[Ae.reason],t="ScreenTime"===e&&Z;if(Re&&(t||"Content"===e&&te)){if(ne.debug("User family status does not allow playing this title, showing request permission button"),t){if(!Ae.lockTime)return ne.warn("Missing required prop 'familyStatus.lockTime' to initiate AAP ScreenTime flow, showing disabled play button"),(0,r.jsx)(f.LI,l()({ref:H,className:W},J));const e={type:"ScreenTime",telemetryLocation:"AskExceptionRequestDialog-ScreenTime",lockTime:Ae.lockTime};return(0,r.jsx)(ue,l()({ref:H,className:W,askExceptionRequest:e},J))}{if(!o)return ne.warn("Missing required prop 'title' to initiate AAP Content flow, showing disabled play button"),(0,r.jsx)(f.LI,l()({ref:H,className:W},J));const e={type:"Content",telemetryLocation:"AskExceptionRequestDialog-Content",contentId:(0,E.c)(Be.details.xboxTitleId,8),gameTitle:o};return(0,r.jsx)(ue,l()({ref:H,className:W,askExceptionRequest:e},J))}}return ne.debug("User family status does not allow playing this title, showing disabled play button"),(0,r.jsx)(f.LI,l()({ref:H,className:W},J))}if(null!==Be&&void 0!==Be&&Be.details.hasEntitlement){const e=(null===se||void 0===se?void 0:se.isProductInByog)&&(null===se||void 0===se?void 0:se.isProductPurchased);return!ge||xe||be?!We&&(null!==se&&void 0!==se&&se.isProductInXgpu||e)?(0,r.jsx)(f.DM,l()({hasPurchased:e,ref:H,className:W,onClick:Qe},J)):(0,r.jsx)(f.wh,l()({ref:H,className:W,onClick:Qe},J)):(0,r.jsx)(Y.l,l()({ref:H,className:W,onClick:Oe},J))}return ne.debug("User does not have a streaming entitlement to play title."),!M||null===se||void 0===se||!se.isProductInByog||se.isProductInXgpu||null!==se&&void 0!==se&&se.isProductPurchased?(ne.debug("Could not determine a valid play button state, showing disabled play button."),(0,r.jsx)(f.LI,l()({ref:H,className:W},J))):se.isProductInEarlyAccess?(ne.debug("Product is not available as part of XGPU, is available as part of BYOG, does not have a streaming entitlement, the user does not own the product, and the product is in early access. Showing Get Early Access button."),(0,r.jsx)($,l()({ref:H,productId:a,className:W},J))):se.isProductPurchasable?(ne.debug("Product is not available as part of XGPU, is available as part of BYOG, does not have a streaming entitlement, and the user does not own the product. Showing Buy button."),(0,r.jsx)(V.r,l()({ref:H,className:W,productId:a},J))):(0,r.jsx)(ee,l()({ref:H,className:W},J))}},6597:(e,t,s)=>{s.d(t,{r:()=>g});var a=s(41506),n=s.n(a),o=s(67996),l=s.n(o),r=(s(47010),s(31085)),i=s(79384),c=s(53373),u=s.n(c),d=s(14041),m=s(93441),p=s(94787),f=s(78672),y=s(12163),h=s(86600),b=s(99253);const N=["productId","className","buttonType"],g=(0,d.forwardRef)(((e,t)=>{let{productId:s,className:a,buttonType:o=i.VQ.Brand}=e,c=l()(e,N);const[g,_]=(0,m.cG)("ProductDetailPage_BuyNowLine1","ProductDetailPage_BuyNowLine2"),x=(0,p.o3)("BuyNowButton"),P=(0,y.G)(),v=(0,d.useCallback)((()=>{x.trackUserAction(f.a.BuyButton,void 0,{productId:s}),P(h.zO.path,{productId:s})}),[P,s,x]);return(0,r.jsxs)(i.JK,n()(n()({as:"button",onClick:v,buttonType:o,ref:t,className:u()(b.ti,a)},c),{},{children:[(0,r.jsx)("div",{className:b.Wg,children:g}),(0,r.jsx)("div",{className:b.b1,children:_})]}))}))},19202:(e,t,s)=>{s.d(t,{c:()=>l,p:()=>o});s(10865),s(10568);var a=s(94670),n=s(67814);class o{constructor(e,t){this.familySafety=e,this.logger=t}async isAllowed(e,t,s,o){const r=this.isUserUnderage(t,s);if(o){let t;try{t=await this.familySafety.fetchFamilySafetyStatus(l(e,8),r)}catch(i){const e=(0,n.g)(i);return this.logger.error(`Unable to get FamilySafetyStatus ${e.message}`,e),{isAllowed:!0,reason:a.ResponseBlockReasons.None,lockTime:void 0}}return t.isAllowed?{isAllowed:!0,reason:a.ResponseBlockReasons.None,lockTime:void 0}:{isAllowed:!1,reason:t.blockReasons,lockTime:t.lockTime}}return r?{isAllowed:!1,reason:"UserIsUnderage",lockTime:void 0}:{isAllowed:!0,reason:a.ResponseBlockReasons.None,lockTime:void 0}}isUserUnderage(e,t){return e>t}}function l(e,t){let s=e.toString(16);for(;s.length<t;)s=`0${s}`;return s=s.toUpperCase(),`0x${s}`}},23536:(e,t,s)=>{s.d(t,{wh:()=>v,DM:()=>w,LI:()=>P});var a=s(41506),n=s.n(a),o=s(67996),l=s.n(o),r=(s(47010),s(31085)),i=s(79384),c=s(77777),u=s(53373),d=s.n(u),m=s(14041),p="PlayButton-module__buttonIcon___Ljgpy",f="PlayButton-module__playButtonGenericOrDisabled___7aRtk",y="PlayButton-module__wrapper___Ki+Qx",h=s(46494),b=s(93441),N=s(99253);const g=["className"],_=["className"],x=["className","hasPurchased"],P=(0,m.forwardRef)(((e,t)=>{let{className:s}=e,a=l()(e,g);const[o]=(0,b.cG)("Play");return(0,r.jsx)("div",{ref:t,tabIndex:0,className:y,children:(0,r.jsx)(i.k4,n()(n()({as:"button",isCallToAction:!0,disabled:!0,icon:c.A,className:d()(f,s),iconClassName:p,buttonType:i.VQ.Brand},a),{},{children:o}))})})),v=(0,m.forwardRef)(((e,t)=>{let{className:s}=e,a=l()(e,_);const[o]=(0,b.cG)("Play");return(0,r.jsx)("div",{ref:t,className:y,children:(0,r.jsx)(i.k4,n()(n()({as:"button",isCallToAction:!0,icon:c.A,className:d()(f,s),iconClassName:p,buttonType:i.VQ.Brand},a),{},{children:o}))})})),w=(0,m.forwardRef)(((e,t)=>{let{className:s,hasPurchased:a}=e,o=l()(e,x);const[c,u,m]=(0,b.cG)("Play","Play_You_Own_This","Play_Included_With_Ultimate");return(0,r.jsxs)(i.JK,n()(n()({ref:t,as:"button","data-action-type":h.y.OverlayIn,className:d()("PlayButton-module__playButton___jZ1LW",s),buttonType:i.VQ.Brand},o),{},{children:[(0,r.jsx)("div",{className:N.Wg,children:c}),(0,r.jsx)("div",{className:N.b1,children:a?u:m})]}))}))},26992:(e,t,s)=>{s.d(t,{$:()=>r});s(47010);var a=s(57361),n=s(14041),o=s(47214),l=s(56136);const r=e=>{const[,t]=(0,o.x)(e,l._.Detailed);return(0,n.useMemo)((()=>(0,a.lceTransform)(t,(e=>e.detailLevel!==l._.Detailed?null:e))),[t])}},64232:(e,t,s)=>{s.d(t,{P:()=>i});var a=s(57361),n=s(14041),o=s(79824),l=s(99249),r=s(60899);function i(){const e=(0,o.useSelector)(r.Pn),t=(0,n.useMemo)((()=>(0,a.lceTransform)(e,(e=>e===l.pu.Login))),[e]);return(0,a.useLce)(t)}}}]);